### ПОДГОТОВКА

Нам необходимо:

-   Доступ к командной строке или окну терминала
-   Пользователь с привилегиями sudo или root
-   Локальный сервер и удаленный сервер
-   Доступ по SSH к удаленному серверу через командную строку или окно терминала

Перед тем как начать проверьте существующие ключи SSH. Возможно, на вашем компьютере уже есть пара ключей SSH. Чтобы узнать, есть ли у вас в системе ключи SSH, выполните команду:

ls -al ~/.ssh/id_*.pub 

Если в выводе указано, что таких файлов нет, переходите к следующему шагу, который показывает, как сгенерировать ключи SSH. Если они у вас есть, вы можете использовать существующие ключи, сделать их резервную копию и создать новую пару или перезаписать ее.

---

### ШАГ 1. СОЗДАЙТЕ ПАРУ КЛЮЧЕЙ SSH

1. Первое, что вам нужно сделать, это сгенерировать пару ключей SSH на машине, на которой вы сейчас работаете.

В этом примере мы генерируем 4096-битную пару ключей. Мы также добавляем адрес электронной почты, но это необязательно. Команда такая:

ssh-keygen -t rsa -b 4096 -C "your_email@domain.com"

2. Затем введите место, где вы хотите сохранить ключи, или нажмите Enter, чтобы принять путь по умолчанию.

3. Также вам будет предложено установить кодовую фразу. Хотя это делает соединение еще более безопасным, оно может прерываться при настройке автоматизированных процессов. Поэтому вы можете ввести пароль или просто нажать Enter, чтобы пропустить этот шаг.

[![Passphrase](https://wiki.merionet.ru/images/kak-nastroit-ssh-vxod-bez-parolya/2.png "Passphrase")](https://wiki.merionet.ru/images/kak-nastroit-ssh-vxod-bez-parolya/2.png)

4. Затем в выводе сообщается, где хранятся идентификационный и открытый ключ, а также выдается отпечаток ключа.

[![Fingerprint](https://wiki.merionet.ru/images/kak-nastroit-ssh-vxod-bez-parolya/3.png "Fingerprint")](https://wiki.merionet.ru/images/kak-nastroit-ssh-vxod-bez-parolya/3.png)

5. Убедитесь, что вы успешно создали пару ключей SSH, выполнив команду:

ls -al ~/.ssh/id_*.pub

Вы должны увидеть путь идентификационного ключа и открытого ключа, как на скриншоте ниже:

[![Путь идентификационного ключа](https://wiki.merionet.ru/images/kak-nastroit-ssh-vxod-bez-parolya/4.png "Путь идентификационного ключа")](https://wiki.merionet.ru/images/kak-nastroit-ssh-vxod-bez-parolya/4.png)

---

### ШАГ 2. ЗАГРУЗИТЕ ОТКРЫТЫЙ КЛЮЧ НА УДАЛЕННЫЙ СЕРВЕР

Вы можете загрузить публичный SSH-ключ на удаленный сервер с помощью команды `ssh-copy-id` или команды `cat`.

#### ВАРИАНТ 1. ЗАГРУЗИТЬ ОТКРЫТЫЙ КЛЮЧ С ПОМОЩЬЮ КОМАНДЫ SSH-COPY-ID

Чтобы включить беспарольный доступ, вам необходимо загрузить копию открытого ключа на удаленный сервер.

1. Подключитесь к удаленному серверу и используйте команду `ssh-copy-id`:

ssh-copy-id [remote_username]@[server_ip_address]

2. Открытый ключ автоматически копируется в файл `.ssh/authorized_keys`.

#### ВАРИАНТ 2: ЗАГРУЗИТЬ ОТКРЫТЫЙ КЛЮЧ С ПОМОЩЬЮ КОМАНДЫ CAT

Другой способ скопировать открытый ключ на сервер - использовать команду `cat`.

1. Начните с подключения к серверу и создания на нем каталога `.ssh`.

ssh [remote_username]@[server_ip_address] mkdir -p .ssh

2. Затем введите пароль для удаленного пользователя.

3. Теперь вы можете загрузить открытый ключ с локальной машины на удаленный сервер. Команда также указывает, что ключ будет храниться под именем `authorized_keys` во вновь созданном каталоге `.ssh`:

cat .ssh/id_rsa.pub | ssh [remote_username]@[server_ip_address] 'cat >> .ssh/authorized_keys'

---

### ШАГ 3. ВОЙДИТЕ НА СЕРВЕР БЕЗ ПАРОЛЯ

После создания пары ключей SSH и загрузки открытого ключа на удаленный сервер вы должны иметь возможность подключаться к выделенному серверу без ввода пароля.

Проверьте, работает ли установка, выполнив команду:

ssh [remote_username]@[server_ip_address]

Система должна напрямую входить в систему на удаленном сервере, пароль не требуется.